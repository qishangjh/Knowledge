---
科目:
课程名称:
tags: []
一轮复习情况: 进行中
二轮复习情况: 未开始
三轮复习情况: 未开始
难度:
考频:
备注:
---
# 07 I/O系统

>[!NOTE] 学习目标
> *   理解I/O系统的基本组成和外部设备的功能。
> *   掌握I/O接口的功能、结构及端口编址方式。
> *   重点掌握程序查询、程序中断和DMA三种I/O方式的工作原理、特点和应用场景。
> *   能区分中断与异常，理解中断处理的软硬件过程。

---

## **07-1 I/O系统基本概念：计算机的"感官与肢体"**

### **1. 输入输出系统 (I/O System)**

I/O系统是计算机中负责管理和协调数据输入、输出的硬件和软件的集合。它使得计算机能够与外部设备进行信息交换。

*   **地位**：CPU是计算机的大脑，I/O系统就是计算机的"感官"（输入）和"肢体"（输出），是计算机与外部世界交互的桥梁。
*   **组成**：通常包括外部设备、I/O接口、以及操作系统中的I/O软件（如设备驱动程序）。

### **2. 外部设备 (External Devices / Peripherals)**

外部设备也称外围设备，是除了主机（CPU和内存）以外的、能直接或间接与计算机交换信息的装置。

#### (1) 输入设备 (Input Devices)

用于向计算机系统输入命令和文本、数据等信息的部件。

*   **键盘**：
    *   最常用的输入设备。每个键相当于一个开关。
    *   **输入流程**：①查出按下的是哪个键；②将该键翻译成能被主机接收的编码（如ASCII码）；③将编码传送给主机。
*   **鼠标**：
    *   常用的定位输入设备，把用户操作与屏幕位置信息关联。
    *   **工作原理**：通过传感器检测运动方向和距离，控制光标移动。

#### (2) 输出设备 (Output Devices)

用于将计算机系统中的信息输出到计算机外部进行显示、交换等的部件。

*   **显示器 (Monitor)**：
    *   **屏幕大小**：以对角线长度表示（如12~29英寸）。
    *   **分辨率**：所能表示的像素个数（如800×600）。
    *   **灰度级**：黑白显示器像素点的亮暗差别，彩色显示器中颜色的不同（`n` 位可表示 `2^n` 种亮度或颜色）。灰度级越多，图像层次越清楚逼真。
    *   **刷新**：光点保持时间短，需要不断重新扫描显示。
        *   **刷新频率**：单位时间内扫描整个屏幕内容的次数（通常60~120Hz）。
        *   **显示存储器 (VRAM)**：为了不断提供刷新图像的信号，必须把一帧图像信息存储在VRAM中。
            *   `VRAM容量 = 分辨率 × 灰度级位数`
            *   `VRAM带宽 = 分辨率 × 灰度级位数 × 帧频`
    *   **分类**：
        *   **按显示器件**：阴极射线管 (CRT)、液晶显示器 (LCD)、LED显示器等。
        *   **按显示内容**：字符显示器、图形显示器、图像显示器。
        *   **按扫描方式**：光栅扫描显示器、随机扫描显示器。
            *   **随机扫描**：将图形的坐标点和绘图命令存入缓冲器，由矢量产生器控制电子束直接移动。优点是分辨率高、曲线平滑；缺点是显示复杂图形时可能闪烁。
*   **打印机 (Printer)**：
    *   **按印字原理**：
        *   **击打式**：机械动作撞击色带和纸。优点是成本低、印字质量好；缺点是噪声大、速度慢（如针式打印机，擅长多层复写打印）。
        *   **非击打式**：电、磁、光、喷墨等方法印刷。优点是速度快、噪声小；缺点是成本高（如喷墨打印机、激光打印机）。
    *   **按工作方式**：
        *   **串行打印机**：逐字打印，速度慢。
        *   **行式打印机**：逐行打印，速度快。

#### (3) 外存设备 (External Storage Devices)

指除计算机内存及CPU缓存等以外的存储器，如硬盘、光盘、U盘等。其详细内容通常在存储器章节（如3.4节）详细介绍。

## **07-2 I/O 接口 (I/O Controller / Device Controller)**

I/O接口，又称I/O控制器或设备控制器，是连接主机与外部设备的桥梁，负责协调它们之间的数据传输。

### **1. I/O 接口的功能**
#2021年

1.  **数据缓冲**：设置数据寄存器（端口），暂存 CPU 和 I/O 设备之间的数据，实现高速 CPU 与低速 I/O 设备之间的速度匹配。
2.  **错误或状态监测**：通过状态寄存器反馈设备的各种错误、状态信息，供CPU查用。
3.  **数据格式转换**：对数据进行串并行转换，或根据设备要求进行其他格式转换。
4.  **控制和定时**：接收 CPU 发来的 I/O 命令，翻译成 I/O 设备能识别的时序控制信号，控制 I/O 设备的工作。
5.  **设备选择**：根据 CPU 指定的设备地址选择对应的 I/O 设备。
6.  **状态报告**：向 CPU 报告 I/O 设备的状态（如忙/闲、就绪、错误等）。
7.  **中断管理**：接收 I/O 设备发来的中断请求，并向 CPU 报告。
>[!danger] **不属于 I/O 接口的典型组件** #2021年
>*   **I/O 设备本身**：如磁盘驱动器（硬盘），它是一个实际的存储设备硬件，包含机械结构和存储介质，直接执行数据读写操作，是数据处理的终端设备，而非中介接口。
>*   **存储器**：如 RAM、ROM。
>*   **处理器核心**：如 CPU、GPU。

### **2. I/O 接口的基本结构**

I/O接口内部包含多个寄存器和控制逻辑：

*   **数据缓冲寄存器 (DBR)**：用于暂存CPU与外设之间交换的数据。
*   **状态寄存器**：存放I/O设备的工作状态信息（如忙/闲、就绪、错误等）。
*   **控制寄存器**：存放CPU发给I/O接口的控制命令，用于控制I/O设备的动作。
*   **设备选择电路**：根据CPU发来的地址信号选择对应的I/O设备。
*   **命令译码器**：将CPU发来的命令字译码成设备能识别的控制信号。
*   **中断请求触发器 (INTR) / 屏蔽触发器 (MASK)**：用于程序中断方式中产生和管理中断请求。
*   **控制逻辑电路**：协调上述各部件工作。

**I/O接口的连接**：
*   **内部接口**：与**系统总线**相连（实质上是与内存、CPU相连）。数据的传输方式总是**并行**传输。
*   **外部接口**：通过接口电缆与外设相连。外部接口的数据传输可能是**串行**方式，因此I/O接口需具有串/并转换功能。

### **3. I/O 接口的类型**

1.  **按数据传送方式**：
    *   **并行接口**：一个字节或一个字的所有位同时传送（指外设和接口一侧）。
    *   **串行接口**：一位一位地传送（指外设和接口一侧）。
    *   **注意**：在主机和接口一侧，数据总是并行传送的。接口需要完成数据格式转换。
2.  **按主机访问I/O设备的控制方式**：程序查询接口、中断接口、DMA接口。
3.  **按功能选择的灵活性**：可编程接口、不可编程接口。

### **4. I/O 端口及其编址**
#2014年 #2017年

*   **I/O 端口 (I/O Port)**：
    *   **概念定义**：I/O 接口中 CPU 可以直接寻址和访问的**寄存器**集合。
    *   **类型**：通常包括**数据端口**（用于传输数据）、**状态端口**（报告设备状态）和**控制端口**（接收 CPU 命令）。
    *   **端口复用**：在实际硬件设计中，为节约成本和简化电路，状态寄存器和控制寄存器**可以合用同一个物理寄存器**。通过不同的访问方式（读/写操作）或地址偏移来区分功能。
*   **I/O 指令的数据传送**： #2017年
    *   `I/O` 指令实现的数据传送通常发生在**通用寄存器和 I/O 端口之间**。
    *   `CPU` 无法通过 `I/O` 指令直接访问 `I/O` 设备，必须通过 `I/O` 端口作为中介。
    *   `I/O` 设备与 `I/O` 端口间的数据传送由设备控制器内部逻辑完成。

CPU如何确定要操作哪个设备，以及如何访问这些I/O端口，有两种主要的编址方式： #2014年

#### (1) 独立编址方式 (Separate I/O Space / Port-Mapped I/O)

*   **原理**：I/O 端口地址与存储器地址**无关**，有自己独立的地址空间。
*   **访问方式**：CPU 需要设置**专门的输入/输出指令**（如 `IN` 和 `OUT` 指令）来访问I/O端口。
    *   **`IN Rd, PortS`**：将I/O端口 `PortS` 的数据输入到CPU寄存器 `Rd`。
    *   **`OUT PortD, Rs`**：将CPU寄存器 `Rs` 的数据输出到I/O端口 `PortD`。
*   **区分方式**：靠不同的**指令**区分内存和I/O设备（访存用访存指令，访I/O用I/O指令）。
*   **特点**：
    *   I/O 地址线和内存地址线可能共用，但有不同的**控制信号**来区分是访问 I/O 还是内存。
    *   因此，**I/O 端口地址和主存地址可能相同**，不会引起冲突。
*   **优点**：
    *   使用专用I/O指令，程序编制清晰。
    *   I/O端口地址位数少，地址译码速度快。
    *   I/O端口的地址不占用主存地址空间。
*   **缺点**：
    *   I/O指令类型少，一般只能对端口进行传送操作，程序设计灵活性差。
    *   需要CPU提供存储器读/写、I/O设备读/写两组控制信号，增加了控制逻辑电路的复杂性。
*   **应用**：Intel 处理器（如x86）常用此方式。

#### (2) 统一编址方式 (Memory-Mapped I/O)

*   **原理**：把I/O端口当做存储器的单元进行地址分配。I/O端口和主存单元**共享同一个地址空间**。
*   **访问方式**：CPU **不需要专门的 I/O 指令**，可以使用**访存指令**（如 `LOAD`、`STORE`、`MOV` 指令）来访问I/O端口。
*   **区分方式**：靠不同的**地址码**区分内存和I/O设备。例如，地址 `0~N-1` 给内存，`N~N+X` 给I/O端口。
*   **特点**：
    *   I/O 端口被看作是内存中的一部分，占用了一部分内存地址空间。
    *   因此，**I/O 端口地址和主存地址必须唯一**，不能相同。
*   **优点**：
    *   不需要专门的I/O指令，程序设计灵活性高（所有访存指令都可用）。
    *   端口有较大的编址空间。
    *   读写控制逻辑电路简单。
*   **缺点**：
    *   端口占用了主存地址空间，使主存地址空间变小。
    *   外设寻址时间长（地址位数多，地址译码速度慢）。
    *   内存和 I/O 访问速度可能不同，但采用统一的访存指令，需要处理好速度差异。
*   **应用**：RISC（精简指令集计算机）机器常用此方式。

## **07-3 I/O 控制方式**

CPU与I/O设备之间进行数据交换，需要不同的控制策略来协调它们的速度差异和工作模式。
主要有以下三种：
1.  **程序查询方式 (Programmed I/O with Polling)**：CPU不断查询设备状态，等待设备就绪。
2.  **程序中断方式 (Interrupt-Driven I/O)**：设备准备就绪后，通过中断请求通知CPU。
3.  **DMA方式 (Direct Memory Access)**：DMA控制器接管CPU对主存的控制权，直接在主存与设备间传输数据块。

### **1. 程序查询方式 (Programmed I/O with Polling)** #2011年

*   **特点**：CPU一旦启动I/O操作，就**不断地循环查询I/O设备的状态**，直到设备准备就绪，CPU才介入进行数据传送。
    *   CPU有"踏步"等待现象。
    *   CPU与I/O设备**串行工作**，CPU在查询和等待过程中不能做其他事情。
*   **流程**：
    1.  CPU执行初始化程序，设置传送参数。
    2.  CPU向I/O接口发送命令字，启动I/O设备。
    3.  **CPU循环从接口读取设备状态信息，判断外设是否准备就绪。**
    4.  若外设就绪，CPU进行数据传送（通常是一个字或字节）。
    5.  修改地址和计数器参数。
    6.  判断传送是否结束（计数器为0时结束）。
*   **优缺点**：
    *   **优点**：接口设计简单、设备量少，不需要特殊硬件支持。
    *   **缺点**：**CPU效率极低**，因为它将大量时间花费在查询和等待上；在一段时间内只能和一台外设交换信息。
*   **应用**：适用于**低速**、数据量小的I/O设备（如键盘、鼠标，因为查询的开销相对较低，不影响CPU太多性能）。对于高速设备则会造成CPU的巨大浪费，甚至无法满足设备传输要求（如硬盘）。
    *   **独占查询**：CPU 100%时间查询，完全串行。
    *   **定时查询**：CPU每隔一段时间查询一次，间隔内可执行其他程序，但仍有查询开销。
>[!danger] 核心缺点
> CPU 必须**循环查询** I/O 状态，等待时间长，**CPU 效率最低**。
>[!tip] CPU 占用率计算公式 #2011年
> 用于衡量 I/O 任务占用的 CPU 时间比例：
> $$占用率 = \frac{查询频率 \times 单次查询周期数}{CPU 主频} \times 100\%$$

### **2. 程序中断方式 (Interrupt-Driven I/O)** #2009年 #2024年

*   **基本思想**：当I/O设备准备就绪（或完成操作）时，它会主动向CPU发送**中断请求信号**，CPU收到请求后暂停当前程序，转去处理中断，处理完毕后再返回原程序。
    *   **CPU与I/O设备并行工作**，CPU可以执行现行程序，I/O设备独立工作，提高了CPU效率。
>[!info] 核心机制
> I/O 设备**主动**请求 CPU，CPU 暂停程序，转入服务程序。

#### (1) 中断与异常的分类 #2009年
>[!key] 中断源头区分
>| 类型 | 产生源 | 与指令关联性 | 触发机制 | 典型事例 |
>| :--- | :--- | :--- | :--- | :--- |
>| **外部中断** (Interrupt) | CPU 外部设备 | **无关** (异步) | 硬件信号 (IRQ/NMI 线) | 键盘输入、I/O 完成、定时器 |
>| **内部异常** (Exception/Trap) | CPU 内部 | **有关** (同步) | 指令执行检测 | 除零、溢出、访存缺页 (内存管理异常) |

#### (2) 工作流程

1.  **中断请求**：I/O设备完成操作后，中断源（设备）向CPU发送中断请求信号。
    *   **中断请求标记触发器 (INTR)**：每个中断源都有，记录中断事件。
    *   **CPU响应中断条件**：①中断源有请求；②CPU允许中断（开中断，`IF=1`）；③一条指令执行完毕，且没有更紧迫的任务。
2.  **中断响应**：
    *   **中断判优**：多个中断源同时请求时，通过硬件排队器或软件查询确定响应顺序（优先级：硬件故障 > 软件中断 > 非屏蔽中断 > 可屏蔽中断 > DMA > 高速设备 > 低速设备）。
    *   **中断隐指令**：CPU检测到中断请求后，自动执行一系列动作（不是具体指令）：
        *   **关中断**：将 `IF` 标志位清零，暂时禁止响应新的可屏蔽中断，以保护中断现场期间不被新的中断打断，确保中断处理的原子性。
        *   **保存断点 (PC)**：将当前程序（被中断程序）的**程序计数器 (PC)** 内容（即下一条要执行的指令地址）保存起来，通常是**压入系统栈**。
        *   **引出中断服务程序**：获取中断服务程序的入口地址，并将其送入 `PC`，使CPU跳转到中断服务程序的第一条指令开始执行。
            *   **硬件向量法**：中断控制器根据中断请求直接产生一个**中断类型号**（或中断向量地址），CPU根据这个类型号查找**中断向量表**，从表中获取中断服务程序的入口地址。这是高效且常用的方式。
            *   **软件查询法**：如果中断源没有提供中断类型号，CPU统一跳转到一个通用入口，由中断服务程序通过软件查询中断请求标记寄存器来判断具体的中断源。
3.  **中断处理 (中断服务程序)** (Interrupt Service Routine, ISR)：
    1.  **保护现场**：除了中断隐指令保存的 `PC` 外，中断服务程序还需要保存**通用寄存器**和**程序状态字 (PSW)** 等CPU环境的关键内容，通常也压入栈中。这是为了确保原程序在中断返回后能够恢复到中断前的完整状态。
    2.  **中断服务 (设备服务)**：这是ISR的主体部分，执行真正处理中断事件的代码。例如，对于键盘中断，读取键盘输入；对于打印机中断，将数据送入打印机缓冲。
    3.  **恢复现场**：在中断服务完毕后，通过出栈指令或其他取数指令，把之前保存的通用寄存器和PSW等信息送回对应的寄存器中，恢复CPU环境。
    4.  **中断返回**：执行专门的**中断返回指令**（如 `IRET` 或 `RETI`）。这条指令会从栈中弹出之前保存的 `PC` 和 `PSW`，并使 `PC` 指向原程序的断点处，同时恢复中断允许标志（开中断），使CPU返回到原程序继续执行。
>[!danger] 中断处理流程 (硬件 vs 软件) #2024年
>| 阶段 | 关键步骤 | 完成者 |
>| :--- | :--- | :--- |
>| **中断隐指令** | 关中断、**保存断点 (PC/PSW)**、引出服务程序 (查中断向量) | **硬件** (自动完成) |
>| **中断服务程序** | **保存现场 (通用寄存器)**、执行服务程序、恢复现场、开中断、中断返回 | **软件** (OS 编写) |

#### (3) 单重中断与多重中断

*   **单重中断 (Single Interrupt)**：
    *   指在执行中断服务程序期间，CPU**不响应**新的中断请求。
    *   **实现**：中断隐指令在开始时**关中断**，直到中断服务程序全部执行完毕，通过中断返回指令才**开中断**。
    *   **特点**：结构简单，但如果中断服务程序很长，可能导致高优先级中断长时间得不到响应。
*   **多重中断 (Multiple Interrupts / Interrupt Nesting)**：
    *   又称**中断嵌套**。指在执行低优先级中断服务程序期间，CPU可以响应**更高优先级**的新中断请求。
    *   **实现**：
        1.  中断隐指令在开始时**关中断**。
        2.  在中断服务程序的**保护现场阶段结束后**，**提前设置开中断指令**。这样，在该ISR执行过程中，若有更高级别的中断到来，CPU可以响应。
        3.  低优先级中断服务程序被中断后，高优先级中断服务程序执行。高优先级ISR执行完毕后，返回到被中断的低优先级ISR，继续执行。
    *   **特点**：提高了系统的实时响应能力和CPU效率，但控制复杂。
    *   **条件**：要具备多重中断功能，须满足：①在中断服务程序中提前设置开中断指令；②优先级别高的中断源有权中断优先级别低的中断源。
>[!danger] 多重中断与中断屏蔽
> *   **多重中断**：正在处理中断时，响应了更高优先级的中断 (中断嵌套)。
> *   **中断屏蔽字**：用于控制不同中断源的屏蔽，是实现**中断优先级**和**嵌套**的基础。

#### (4) 中断屏蔽技术

*   主要用于多重中断，通过**屏蔽字寄存器**控制每个中断源是否允许申请中断。它允许系统灵活地调整和控制不同中断源的优先级。
*   **屏蔽触发器与屏蔽字**：
    *   每个中断源都有一个**屏蔽触发器**。`1` 表示**屏蔽**（禁止）该中断源的请求，`0` 表示可以**正常申请**。
    *   所有屏蔽触发器组合在一起，便构成一个**屏蔽字寄存器**，其内容称为**屏蔽字**。
*   **应用原理**：
    *   在处理某个中断源 `A` 的中断服务程序时，会将**对应中断源 `A` 的屏蔽字**加载到屏蔽字寄存器中。
    *   该屏蔽字决定了在处理 `A` 中断期间，哪些中断源可以被响应，哪些会被屏蔽。
    *   **屏蔽字设置规律**：
        1.  一般用 `1` 表示屏蔽，`0` 表示正常申请。
        2.  每个中断源都对应一个屏蔽字（当CPU正在处理该中断源时，屏蔽字寄存器加载该屏蔽字）。
        3.  **屏蔽字中 `1` 越多，表示中断优先级越高**。例如，如果 `A` 中断服务程序对应的屏蔽字比 `B` 中断的屏蔽字有更多的 `1`，则意味着 `A` 中断时屏蔽了更多中断，其优先级相对更高。
        4.  **每个屏蔽字中至少有一个 `1`**：至少要能屏蔽**自身**的中断，以避免在处理自身中断时再次被自身中断。
*   **优缺点**：
    *   **优点**：CPU与I/O设备并行工作，提高了CPU的利用率。
    *   **缺点**：每次中断都需要保存/恢复现场，有时间开销；对于高速数据块传输效率仍不高。

### 3. DMA方式 (Direct Memory Access) #2023年 

#### (1) DMA 控制器的组成 

*   **DMA控制器 (DMAC) 的功能**：
    1.  接受外设发出的DMA请求。
    2.  向CPU发出总线请求，接管总线控制权。
    3.  确定并管理数据在主存、外设中的地址和传送长度，并能自动修改主存地址计数 (DAR) 和传送长度计数 (WC)。
    4.  规定数据传送方向，发出读写控制信号。
    5.  向CPU报告DMA操作结束（通过中断请求）。
*   **DMA 控制器的主要寄存器**：
    *   **DAR (Data Address Register)**：主存中数据块的起始地址寄存器，用于存放当前数据在主存中的地址，并在传输过程中自动修改。
    *   **WC (Word Count Register)**：字计数器，用于存放本次DMA传输的数据量（通常以字为单位），并在传输过程中自动递减。
    *   **CR (Control Register)**：控制/状态寄存器，用于存放DMA控制器的控制命令（如传输方向、启动/停止）和设备状态信息。

#### (2) DMA 传送过程

1.  **传送前 (预处理)**：CPU向DMA控制器初始化参数（传送方向、数据量、主存地址、外设地址），即设置DAR、WC、CR等寄存器。
2.  **传送时 (DMA控制)**：
    *   I/O设备（或其接口）发出DMA请求信号。
    *   DMA控制器收到请求后，向CPU发出总线请求。
    *   CPU在适当的时机让出总线控制权，DMA控制器接管总线。
    *   DMA控制器直接控制主存和外设进行数据块传送，**数据传输不经过CPU**，CPU可同时执行其他程序。
    *   每次传送一个字，DMA控制器会自动修改DAR和WC。
3.  **传送后 (后处理)**：DMA控制器完成整个数据块传送后，向CPU发出**中断请求**。CPU响应此中断，进行必要的后处理（如检查传输是否成功、更新状态等）。

#### (3) DMA传送方式（CPU与DMA控制器使用主存的总线占用方式）

DMA控制器与CPU共享主存，因此存在对主存访问权的竞争，有以下几种总线占用方式：

1.  **停止CPU访问主存**：
    *   **原理**：DMA传送期间，CPU完全停止对主存的访问，将主存总线完全交给DMA控制器。
    *   **特点**：控制简单。
    *   **缺点**：CPU利用率最低，因为CPU在这段时间内不能做任何与主存相关的工作。
2.  **DMA与CPU交替访存**：
    *   **原理**：将一个CPU周期划分为两个子周期，一个子周期专供DMA控制器访存，另一个子周期专供CPU访存。
    *   **特点**：CPU和DMA可以并行工作，不需要总线申请、建立、归还的过程，效率较高。
    *   **缺点**：硬件逻辑复杂，对CPU周期划分要求高。
3.  **周期挪用 (Cycle Stealing)**：
    *   **原理**：DMA控制器在需要访问主存时，向CPU提出申请。
        *   如果CPU此时不访存，DMA控制器直接访问主存。
        *   如果CPU正在访存，DMA控制器等待一个存取周期结束，CPU让出总线后，DMA再访存。
        *   如果CPU与DMA同时请求访存，通常**I/O（DMA）访存优先级更高**，CPU会暂停一个存取周期。
    *   **特点**：这是**最常用**的方式。总线利用率高，CPU大部分时间仍能正常工作，只在DMA需要时“窃取”少量CPU存取周期。
    *   **缺点**：CPU的工作会受到轻微影响，但影响程度远小于停止CPU访问主存方式。

#### (4) DMA方式的特点

1.  主存与CPU的固定联系脱钩，主存可被CPU和外设访问。
2.  数据块传送时，主存地址确定、传送数据计数等都由硬件电路直接实现。
3.  主存中通常要开辟专用缓冲区用于DMA传输。
4.  DMA传送速度快，CPU和外设并行工作，大大提高了系统效率和吞吐量。
5.  DMA在传送开始前要通过程序进行预处理，结束后要通过中断方式进行后处理。

### **4. DMA方式与中断方式的对比**

| 特点         | 程序中断方式                         | DMA方式                              |
| :----------- | :----------------------------------- | :----------------------------------- |
| **数据传送** | 程序控制（CPU参与每次数据传输）    | 硬件控制（DMA控制器接管总线，CPU不参与） |
| **CPU介入**  | 整个数据传送过程需CPU频繁切换和参与（每次数据传送都产生中断） | CPU只需预处理和后处理（仅在数据块传输开始和结束时介入） |
| **数据单位** | 每次中断传送一个字或字节             | 每次DMA传送一个字，但以**数据块**为单位进行处理（一次DMA传输完成一整块数据） |
| **中断请求** | 每次数据传输完成都申请中断           | 传送完**一整块数据**后才申请一次中断 |
| **响应时机** | 指令执行周期结束后响应中断           | 每个机器周期结束均可，总线空闲时即可响应DMA请求（优先级高于普通中断） |
| **效率**     | CPU利用率相较查询方式有提升，但仍有切换开销 | CPU效率最高，几乎完全解放CPU，系统并行性最佳 |
| **适用场景** | 低速~中速设备（如键盘、打印机、普通串行通信） | 高速设备、大批量数据传输（如磁盘、网卡、显卡） |
| **优先级**   | 优先级低于DMA请求                    | 优先级通常高于普通中断请求           |
| **异常处理** | 能处理各种异常事件（如设备故障、数据错误） | 仅传送数据，无法处理数据传输过程中的异常事件，需要CPU中断后处理 |

---

>[!link] 总结对比 (效率：程序查询 < 程序中断 < DMA)
> *   **查询**：CPU 忙等待 I/O 状态，效率最低。
> *   **中断**：CPU 响应 I/O 完成信号，每次数据传输都涉及中断服务，有保存/恢复现场开销。
> *   **DMA**：CPU 仅参与始末，数据传输期间完全解放 CPU，效率最高。

