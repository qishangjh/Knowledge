---
科目: 
课程名称: 
tags: []
一轮复习情况: 进行中
二轮复习情况: 未开始
三轮复习情况: 未开始
难度: 
考频: 
备注:
---

## C语言 #基础 #循环控制 #While循环 #DoWhile循环 #For循环 #Break #Continue

> [!NOTE] 学习目标
> *   理解循环控制的基本概念和必要性。
> *   掌握 `while` 循环的语法、执行流程和应用场景。
> *   掌握 `do-while` 循环的语法、执行流程，并理解其与 `while` 循环的区别。
> *   掌握 `for` 循环的语法、执行流程和应用场景。
> *   理解并正确使用 `break` 和 `continue` 语句来控制循环的执行。
> *   了解循环嵌套的概念。

### 03-1 循环控制：让程序学会"重复"

在编程中，我们经常需要重复执行相同的或类似的代码块多次。如果每次都手动复制粘贴，不仅效率低下，而且代码会变得冗长且难以维护。**循环结构**就是为了解决这个问题而设计的，它允许我们指定一段代码重复执行的条件和次数。

C语言提供了三种基本的循环语句：
1. **`while` 循环**：先判断条件，再执行循环体。
2. **`do-while` 循环**：先执行一次循环体，再判断条件。
3. **`for` 循环**：通常用于已知循环次数的情况，将循环控制的三个关键部分（初始化、条件、更新）集中在一起。

### 03-2 `while` 循环：条件满足，我就一直转

`while` 循环被称为"当型循环"或"前测试循环"。它的特点是**先判断循环条件，如果条件为真，则执行循环体；执行完循环体后，再次判断条件，如此反复，直到条件为假时才跳出循环**。

#### 1. 语法

```c
while (条件表达式) {
    // 循环体：当条件表达式为真时重复执行的代码
    // 必须在循环体内部改变条件表达式，否则会形成死循环！
}
```

#### 2. 执行流程

1. 首先计算 `条件表达式` 的值。
2. 如果 `条件表达式` 的值为真（非0），则执行循环体内的代码。
3. 循环体执行完毕后，再次回到第1步，重新判断 `条件表达式`。
4. 如果 `条件表达式` 的值为假（0），则跳出 `while` 循环，执行 `while` 循环后面的代码。

> [!WARNING] 小心"死循环"！
> 如果循环体内的代码**没有改变条件表达式的值**，导致条件表达式永远为真，那么循环将无限次地执行下去，这被称为**死循环** (Infinite Loop)。死循环会耗尽CPU资源，导致程序卡死。

#### 3. 示例：打印1到5的数字

```c
#include <stdio.h>

int main() {
    int i = 1; // 循环变量初始化

    while (i <= 5) { // 循环条件：当i小于等于5时执行
        printf("%d ", i); // 循环体：打印i的值
        i++;             // 更新循环变量：i自增1
    }
    printf("\n循环结束。\n");
    return 0;
}
// 输出：1 2 3 4 5
//       循环结束。
```

### 03-3 `do-while` 循环：至少要转一次

`do-while` 循环被称为"直到型循环"或"后测试循环"。它的特点是**先无条件地执行一次循环体，然后再判断循环条件；如果条件为真，则继续执行循环体；如果条件为假，则跳出循环**。

#### 1. 语法

```c
do {
    // 循环体：至少执行一次的代码
    // 必须在循环体内部改变条件表达式，否则会形成死循环！
} while (条件表达式); // 注意：这里有一个分号！
```

#### 2. 执行流程

1. **无条件**地执行一次循环体内的代码。
2. 循环体执行完毕后，计算 `条件表达式` 的值。
3. 如果 `条件表达式` 的值为真（非0），则再次回到第1步，执行循环体。
4. 如果 `条件表达式` 的值为假（0），则跳出 `do-while` 循环，执行后面的代码。

#### 3. `do-while` 与 `while` 的区别

* **`while` 循环**：先判断条件，后执行循环体。如果条件一开始就为假，循环体**可能一次都不执行**。
* **`do-while` 循环**：先执行循环体，后判断条件。循环体**至少会执行一次**，即使条件一开始就为假。

#### 4. 示例：打印1到5的数字

```c
#include <stdio.h>

int main() {
    int i = 1; // 循环变量初始化

    do {
        printf("%d ", i); // 循环体：打印i的值
        i++;             // 更新循环变量：i自增1
    } while (i <= 5);    // 循环条件：当i小于等于5时继续循环
    printf("\n循环结束。\n");
    return 0;
}
// 输出：1 2 3 4 5
//       循环结束。
```

#### 5. 示例：当条件不满足时

```c
#include <stdio.h>

int main() {
    int x = 10;

    // while 循环：条件一开始就为假，循环体不会执行
    printf("--- while 循环 ---\n");
    while (x < 5) {
        printf("这个不会被打印。\n");
        x++;
    }
    printf("while 循环结束，x = %d\n", x); // x 仍为 10

    // do-while 循环：条件一开始为假，但循环体至少执行一次
    printf("--- do-while 循环 ---\n");
    x = 10; // 重新初始化x
    do {
        printf("这个会被打印一次！\n");
        x++;
    } while (x < 5); // 此时 x 为 11，条件 11 < 5 为假，跳出
    printf("do-while 循环结束，x = %d\n", x); // x 变为 11
    return 0;
}
// 输出：
// --- while 循环 ---
// while 循环结束，x = 10
// --- do-while 循环 ---
// 这个会被打印一次！
// do-while 循环结束，x = 11
```

### 03-4 `for` 循环：一站式搞定循环控制

`for` 循环是最常用的一种循环结构，特别适用于**已知循环次数**（或可以计算出循环次数）的情况。它将循环控制的三个关键部分（初始化、条件、更新）集中在一行，使得代码结构更加紧凑和清晰。

#### 1. 语法

```c
for (初始化表达式; 条件表达式; 更新表达式) {
    // 循环体：当条件表达式为真时重复执行的代码
}
```

* **初始化表达式**：在循环开始前**只执行一次**，通常用于初始化循环变量。
* **条件表达式**：在每次循环迭代前进行判断。如果为真，执行循环体；如果为假，跳出循环。
* **更新表达式**：在每次循环体执行完毕后执行，通常用于更新循环变量的值。

#### 2. 执行流程

1. 执行**初始化表达式** (只执行一次)。
2. 计算**条件表达式**的值。
3. 如果条件为真（非0）：
    a.  执行循环体内的代码。
    b.  执行**更新表达式**。
    c.  返回第2步。
4. 如果条件为假（0）：
    a.  跳出 `for` 循环，执行 `for` 循环后面的代码。

#### 3. 示例：打印1到5的数字

```c
#include <stdio.h>

int main() {
    // for循环：初始化、条件、更新都在一行
    for (int i = 1; i <= 5; i++) {
        printf("%d ", i); // 循环体：打印i的值
    }
    printf("\n循环结束。\n");
    return 0;
}
// 输出：1 2 3 4 5
//       循环结束。
```

#### 4. `for` 循环的灵活使用

`for` 循环的三个部分都可以省略，但分号不能省略。

* **省略初始化表达式**：可以在 `for` 循环前初始化。

    ```c
    int i = 1;
    for (; i <= 5; i++) {
        printf("%d ", i);
    }
    ```

* **省略更新表达式**：可以在循环体内更新。

    ```c
    for (int i = 1; i <= 5; ) {
        printf("%d ", i);
        i++;
    }
    ```

* **省略条件表达式**：默认为真，会形成死循环。需要结合 `break` 跳出。

    ```c
    for (int i = 1; ; i++) { // 条件表达式省略，默认为真
        printf("%d ", i);
        if (i == 5) {
            break; // 当i等于5时跳出循环
        }
    }
    ```

* **所有部分都省略**：相当于一个死循环 `while(1)`。

    ```c
    for (;;) {
        // 无限循环，需要内部有break语句才能跳出
    }
    ```

    > [!TIP] 多个表达式  
    > 初始化表达式和更新表达式可以包含多个子表达式，用逗号 `,` 分隔。
>
    > ```c
    > for (int i = 0, j = 10; i < j; i++, j--) {
    >     printf("i = %d, j = %d\n", i, j);
    > }
    > ```

### 03-5 循环控制语句：`break` 和 `continue`

`break` 和 `continue` 是两个特殊的语句，它们用于更精细地控制循环的执行流程。

#### 1. `break` 语句：强制跳出循环

`break` 语句用于**立即终止当前所在的循环（`while`, `do-while`, `for`）或 `switch` 语句**，程序流程会跳到循环体或 `switch` 语句之后的下一条语句。

* **示例**：在循环中找到特定值后立即停止。

    ```c
    #include <stdio.h>

    int main() {
        for (int i = 1; i <= 10; i++) {
            if (i == 5) {
                printf("找到5了，跳出循环！\n");
                break; // 当i等于5时，立即终止for循环
            }
            printf("当前数字: %d\n", i);
        }
        printf("循环外的代码。\n");
        return 0;
    }
    // 输出：
    // 当前数字: 1
    // 当前数字: 2
    // 当前数字: 3
    // 当前数字: 4
    // 找到5了，跳出循环！
    // 循环外的代码。
    ```

    > [!NOTE] `break` 只跳出**最内层**的循环！  
    > 如果存在多层嵌套循环，`break` 只会跳出它所在的那一层循环，而不会影响外层循环。

#### 2. `continue` 语句：跳过本次循环，继续下一次

`continue` 语句用于**跳过当前循环体中剩余的代码，直接进入下一次循环的判断和迭代**。

* **示例**：只打印奇数。

    ```c
    #include <stdio.h>

    int main() {
        for (int i = 1; i <= 10; i++) {
            if (i % 2 == 0) { // 如果i是偶数
                continue;   // 跳过本次循环中printf语句，直接进入下一次迭代(i++)
            }
            printf("当前奇数: %d\n", i);
        }
        printf("循环外的代码。\n");
        return 0;
    }
    // 输出：
    // 当前奇数: 1
    // 当前奇数: 3
    // 当前奇数: 5
    // 当前奇数: 7
    // 当前奇数: 9
    // 循环外的代码。
    ```

### 03-6 循环嵌套：循环中的循环

循环语句可以像 `if` 语句一样进行嵌套。一个循环的循环体可以包含另一个完整的循环。这在处理多维数据（如矩阵）、打印图形（如星号图案）等场景中非常常见。

* **基本结构**：

    ```c
    for (外层循环初始化; 外层循环条件; 外层循环更新) {
        // 外层循环体代码…
        for (内层循环初始化; 内层循环条件; 内层循环更新) {
            // 内层循环体代码…
        }
        // 外层循环体代码…
    }
    ```

* **示例**：打印乘法口诀表。

    ```c
    #include <stdio.h>

    int main() {
        for (int i = 1; i <= 9; i++) { // 外层循环控制行
            for (int j = 1; j <= i; j++) { // 内层循环控制列
                printf("%d * %d = %-2d   ", j, i, i * j);
            }
            printf("\n"); // 每行打印完后换行
        }
        return 0;
    }
    /*
    输出：
    1 * 1 = 1
    1 * 2 = 2    2 * 2 = 4
    1 * 3 = 3    2 * 3 = 6    3 * 3 = 9
    …
    */
    ```

    > [!WARNING] 嵌套循环的效率  
    > 嵌套循环会显著增加程序的执行时间。如果外层循环执行 `M` 次，内层循环执行 `N` 次，那么内层循环体内的代码会执行 `M * N` 次。在设计算法时，应尽量优化循环次数，避免不必要的嵌套。

---
