---
科目: 
课程名称: 
tags: []
一轮复习情况: 进行中
二轮复习情况: 未开始
三轮复习情况: 未开始
难度: 
考频: 
备注:
---

## 01 计算机网络概述


> [!NOTE] 学习目标
> *   理解计算机网络的基本概念、组成、功能及分类。
> *   掌握三种数据交换技术（电路、报文、分组）的特点和适用场景。
> *   熟练掌握计算机网络的主要性能指标及其计算方法。

---

### **01-1 计算机网络概述**

#### **1. 计算机网络的概念、组成与功能**

##### (1) 计算机网络的概念

*   **计算机网络 (Computer Network)**：
    *   由若干 #节点 （node，如计算机、集线器、路由器、交换机）和连接这些node的 #链路（Link）组成。
    *   是**自治计算机互连的集合体**，包含：
        *   **自治计算机**：由软硬件组成，能实现计算机功能。
        *   **互连**：计算机间实现相互通信。
        *   **集合体**：指所有使用通信线路及互联设备连接起来的自治计算机的集合。
*   **互连网 (internet)**：
    *   多个网络通过一些路由器相互连接起来，构成一个覆盖范围更大的计算机网络。
*   **互联网 (Internet)**：
    *   指当前全球最大的、开放的、由众多网络相互连接而成的特定互连网。
    *   它采用 #TCP/IP协议族 作为通信的规则。
    *   其前身是美国的 #ARPANET 。

##### (2) 计算机网络的组成

计算机网络可从不同角度进行组成分析：

*   **从构成角度**：
    *   **硬件**：主机（host终端设备）、通信设备（集线器、交换机、路由器、调制解调器、无线基站）、通信链路（网线、光纤等）。
    *   **软件**：操作系统、网络协议栈（如TCP/IP）、应用程序。
    *   **协议**：OSI七层模型或TCP/IP四层模型定义的通信规则。
*   **从工作方式角度**：
    *   **边缘部分**：终端设备（主机），直接为用户服务（如PC、手机）。
    *   **核心部分**：网络设备（路由器、交换机），负责数据传输和路由选择。
*   **从逻辑功能组成角度**：
    *   **资源子网**：提供计算、存储、数据处理等资源（如服务器、数据库）。
    *   **通信子网**：负责数据传输（如路由器、光纤）。

##### (3) 计算机网络的功能

计算机网络使得信息技术能够发挥更大的作用：

*   **数据通信**：最基本功能，实现信息传输（如邮件、文件共享）。
*   **资源共享**：
    *   **硬件共享**：共享打印机、存储设备。
    *   **软件共享**：远程访问数据库或应用程序。
    *   **数据共享**：云存储、在线文档协作。
*   **分布式处理**：将任务分发到多台计算机并行处理（如矩阵运算、云计算）。
*   **提高可靠性**：通过冗余备份（如网盘多服务器集群）。
*   **负载均衡**：分散流量压力（如游戏服务器集群）。

#### **2. 计算机网络的分类 (数据交换技术)**

根据数据在网络中的交换方式，计算机网络可分为三大类，这也是网络运行模式的核心分类：

##### (1) 电路交换 (Circuit Switching) - 电话网络

*   **特点**：
    *   在通信开始前，在源端和目的端之间建立一条**专用的物理连接**。
    *   **优点**：传输速率高（专用物理通道），无延迟，数据传输稳定。
    *   **缺点**：资源利用率低（独占线路，即使无数据传输也占用）、建立连接耗时，不支持差错控制。
*   **应用场景**：传统电话网络。

##### (2) 报文交换 (Message Switching) - 电报网络

*   **特点**：
    *   无需预先建立连接。数据以完整的**报文**为单位进行传输。
    *   网络节点接收到整个报文后，进行**存储转发**，直到找到下一跳节点。
    *   **优点**：无需预分配资源，线路利用率高, 支持存储转发和差错控制。
    *   **缺点**：长报文传输时延大（每个节点都要接收整个报文再转发）、占用大量缓存。
*   **应用场景**：早期电报系统。

##### (3) 分组交换 (Packet Switching) - 现代网络

*   **特点**：
    *   将大的数据报文**分割成定长或变长的小数据块**，称为**分组（Packet）**。每个分组独立传输，包含首部（源/目的地址、分组号等）和数据。
    *   网络节点采用**存储转发**的方式传输分组，但由于分组较小，存储转发时延显著降低。
    *   **优点**：灵活性高（动态分配资源）、线路利用率高、支持差错控制、多用户可共享线路。
    *   **缺点**：分组可能失序或丢失，需额外协议（如TCP）保证可靠性；有分组头部的开销。
*   **类型**：
    *   **数据报 (Datagram)**：#数据报 #Datagram
        *   **无连接**：每个分组独立寻址，独立路由。
        *   **特点**：简单灵活，但可能出现乱序、重复或丢失，由上层协议（如TCP）负责可靠性。
        *   **典型应用**：IP协议。
    *   **虚电路 (Virtual Circuit, VC)**：#虚电路 #VirtualCircuit
        *   **面向连接**：在数据传输前先建立一条逻辑上的虚连接，确定好传输路径。
        *   **特点**：所有分组沿固定路径传输，保证顺序到达，可靠性较高。
        *   **阶段**：建立阶段（预分配路径）、数据传输阶段（按路径传输，无需每次都查找路由）、释放阶段（释放资源）。
        *   **典型应用**：帧中继（Frame Relay）、ATM。
*   **现代应用**：互联网（IP分组交换）。

**数据交换技术对比总结表：**

| 对比维度      | 电路交换               | 报文交换               | 分组交换                   |
| :---------- | :----------------- | :----------------- | :----------------------- |
| **连接方式**  | 面向连接（独占物理线路）| 无连接                | 有连接（虚电路）或 无连接（数据报）|
| **资源分配**  | 静态分配（独占物理线路）| 动态分配              | 动态分配                  |
| **传输单位**  | 比特流（无结构）| 整个报文              | 分组（数据包）|
| **传输路径**  | 固定路径              | 动态路由              | 虚电路：固定路径<br>数据报：动态路由 |
| **延迟**    | 小（建立连接后无传输延迟）| 大（存储转发延迟）| 中等（分组处理延迟）|
| **可靠性**   | 无差错控制             | 有一定差错控制           | 有差错控制（需上层协议保障）|
| **资源利用率** | 低（线路独占）| 较高                 | 高                       |
| **适用场景**  | 实时性强、传输量大的场景（如电话）| 非实时、数据量小的场景（如电报）| 灵活、多样化的网络通信（如互联网）|
| **典型应用**  | 传统电话网络             | 早期电报系统             | 因特网（IP、TCP）|

**数据报与虚电路对比总结表：**

| 对比维度         | 数据报（Datagram）            | 虚电路（Virtual Circuit）       |
| :--------------- | :---------------------------- | :---------------------------- |
| **连接方式**      | 无连接                        | 面向连接                      |
| **路由方式**      | 每个分组独立选路              | 建立连接时确定路径            |
| **路径固定性**    | 不固定                         | 固定路径                       |
| **资源分配**      | 动态分配                       | 预分配资源                     |
| **可靠性**        | 较低（依赖上层协议）          | 较高                           |
| **典型协议**      | IP（Internet Protocol）       | 帧中继（Frame Relay）、ATM     |

#### **3. 计算机网络主要性能指标** #近年修改

理解网络性能指标对于评估和设计网络至关重要。

*   **速率 (Data Rate) / 比特率 (Bit Rate)**：
    *   **定义**：单位时间内传输的比特数。
    *   **公式**： $$ \text{速率} = \frac{\text{数据长度（比特）}}{\text{传输时间（秒）}} $$
    *   **单位**：比特每秒（bps, bit/s），常用Mbps、Gbps等。例如，100Mbps网卡指理论最高速率为100兆比特每秒。
*   **带宽 (Bandwidth)**：
    *   **在模拟信号领域**：指信号所占据的频率宽度，单位Hz。
    *   **在数字网络领域**：通常指网络设备或信道所能达到的**最高数据传输速率**，单位bps。
    *   **奈氏准则 (Nyquist Criterion)**：在理想低通（无噪声、带宽为W的）信道中，极限码元传输速率为 $2W$ Baud。若一个码元可携带 $M$ 种信号（即 $\log_2 M$ 比特），则极限数据传输速率为：
        $$ \text{带宽} = 2W \log_2(M) \quad \text{(bps)} $$
        其中，$W$ 为信道带宽（Hz），$M$ 为信号电平数。
*   **吞吐量 (Throughput)**：
    *   **定义**：在单位时间内，网络实际上成功传输的**数据量**。
    *   **特点**：吞吐量受网络的带宽、负载、协议开销等多种因素影响，因此**吞吐量通常小于等于带宽**。
*   **时延 (Delay)**：
    *   **定义**：数据从网络一端发送到另一端所需的时间。
    *   **组成部分**：
        1.  **发送时延 (Transmission Delay)**：
            *   **定义**：数据块从发送端完全进入传输介质所需的时间。
            *   **公式**： $$ T_{\text{发送}} = \frac{\text{数据长度（比特）}}{\text{发送速率（bps）}} $$
            *   **注意**：与传输介质的长度无关，只与数据量和发送速率有关。
        2.  **传播时延 (Propagation Delay)**：
            *   **定义**：电磁波在信道中传播所需的物理时间。
            *   **公式**： $$ T_{\text{传播}} = \frac{\text{信道长度（米）}}{\text{电磁波传播速度（米/秒）}} $$
            *   **注意**：与数据量和发送速率无关，只与物理距离和介质特性有关。
        3.  **处理时延 (Processing Delay)**：
            *   **定义**：数据在网络节点（如路由器）进行存储转发、差错检测、路由选择等操作所需的时间。
        4.  **排队时延 (Queuing Delay)**：
            *   **定义**：数据在网络节点的输入或输出队列中等待处理和转发所经历的时间。
            *   **注意**：排队时延具有不确定性，取决于网络流量和拥塞程度。

    *   **总时延 (Total Delay)**：在单个链路上，通常指：
        $$ T_{\text{总}} = T_{\text{发送}} + T_{\text{传播}} + T_{\text{处理}} + T_{\text{排队}} $$
        在有多跳路由的网络中，总时延是所有节点和链路时延的总和。
    *   **时延带宽积 (Bandwidth-Delay Product)**：
        *   **定义**：表示一条链路在任何给定时刻可以容纳的**最大比特数**，也称为信道的容量。
        *   **公式**： $$ \text{时延带宽积} = T_{\text{传播}} \times \text{带宽} $$
        *   **物理意义**：链路的"长度"（比特数）。

*   **性能计算示例**：

    **例题**：
    计算一个分组的总时延：
    *   分组大小：1000字节（8000比特）。
    *   链路A速率：100Mbps，传播时延：0.01ms。
    *   链路B速率：80Mbps，传播时延：0.05ms。
    *   路由器处理时延：0.04ms，排队时延：0ms。
    *   假设分组从发送端经过链路A到达路由器，路由器处理后经链路B到达接收端。

    **解答**：
    1.  **发送时延（发送端通过链路A）**：
        $$ T_{\text{发送A}} = \frac{8000 \text{ bit}}{100 \times 10^6 \text{ bit/s}} = 0.00008 \text{ s} = 0.08 \text{ ms} $$
    2.  **发送时延（路由器通过链路B）**：
        $$ T_{\text{发送B}} = \frac{8000 \text{ bit}}{80 \times 10^6 \text{ bit/s}} = 0.0001 \text{ s} = 0.1 \text{ ms} $$
    3.  **总时延**：
        $$ T_{\text{总}} = T_{\text{传播A}} + T_{\text{发送A}} + T_{\text{处理}} + T_{\text{传播B}} + T_{\text{发送B}} $$
        $$ T_{\text{总}} = 0.01 \text{ ms} + 0.08 \text{ ms} + 0.04 \text{ ms} + 0.05 \text{ ms} + 0.1 \text{ ms} = 0.28 \text{ ms} $$

---

## 02 计算机网络体系结构

备注: OSI/TCP-IP模型对比、各层功能、协议要素、设备工作层级、封装解封装是重点和难点。

> [!NOTE] 学习目标
> *   理解计算机网络分层结构的概念、重要性及PDU、SDU、PCI。
> *   掌握网络协议、接口、服务的概念及协议的三要素（语法、语义、时序）。
> *   熟练掌握ISO/OSI参考模型和TCP/IP参考模型的层次结构、主要功能、特点及相互关系。
> *   能够识别常见网络设备在OSI模型中的工作层级。
> *   理解数据在协议栈中的封装和解封装过程。

---

### **02-1 计算机网络体系结构与参考模型**

#### **1. 计算机网络分层结构** #必考

*   **网络的体系结构**：计算机网络的各层及其协议的集合。它是一个抽象的、功能性的描述，而非具体的实现细节。
> [!danger] **不属于网络体系结构所描述的内容是协议的内部实现细节** #2010年-33
> **核心概念总结**
> 
> | 概念维度 | 定义内容 | 涵盖范围 | 抽象层次 | 标准化程度 |
> | :--- | :--- | :--- | :--- | :--- |
> | 网络层次结构 | 分层模型的垂直划分 | OSI 七层/TCP/IP 四层 | 架构级抽象 | 国际标准 |
> | 层间协议规范 | 各层通信规则定义 | 协议族和协议栈 | 接口级抽象 | 协议标准 |
> | 功能职责分配 | 每层承担的网络任务 | 数据处理和传输职能 | 功能级抽象 | 规范要求 |
> | **实现技术细节** | 协议的具体编程实现 | 算法和数据结构 | **代码级具体** | 厂商自定 |
> **关键答题技巧**
> *   **抽象层次辨析**：区分架构设计 (what & how to interact) vs 具体实现 (how to implement)。体系结构关注"做什么"和"如何交互"，而非"如何实现"。
> *   **标准化范围**：协议标准只规定外部行为和接口规范，内部实现属于各厂商的技术秘密和创新空间。
> *   **关键词识别**：捕捉"内部实现"等提示词，重点关注否定性表述。
> 网络的体系结构主要描述网络系统整体设计的抽象框架、逻辑组织方式、协议规范和功能职责，属于系统级的架构设计范畴。协议的内部实现细节，如具体的编程算法和数据结构，属于工程实现层面，超出体系结构的描述范围。

*   **协议数据单元 (Protocol Data Unit, PDU)**：
    *   指在OSI模型中，每一层的数据单元。数据在不同层次之间传输时，会被加上不同层次的**头部**（Header）和**尾部**（Trailer）信息。这种带有头部/尾部的数据包，就叫做那一层的**协议数据单元（PDU）**。
    *   **命名约定**：
        *   **应用层**的PDU通常叫**消息（Message）**。
        *   **传输层**的PDU通常叫**报文段（Segment）**（TCP）或**用户数据报（Datagram）**（UDP）。
        *   **网络层**的PDU通常叫**数据报（Datagram）**或**分组（Packet）**。
        *   **数据链路层**的PDU通常叫**帧（Frame）**。
        *   **物理层**的PDU通常叫**比特（Bit）**。
*   **服务数据单元 (Service Data Unit, SDU)**：
    *   指从上层接收并向下层传递的数据单元，**不包含协议控制信息（PCI）**。可以理解为上层协议向当前层"提交"的原始数据。
*   **协议控制信息 (Protocol Control Information, PCI)**：
    *   指各层为实现本层功能而添加的控制信息，如首部和尾部。
> [!tip] **数据封装与传输效率计算** #2017年-33
> **题目**：假设 OSI 参考模型的应用层欲发送 400B 的数据（无拆分），除物理层和应用层之外，其他各层在封装 PDU 时均引入 20B 的额外开销，则应用层数据传输效率约为（ ）。A. 80%
> **计算步骤**：
> 1.  **有效数据量 (应用层)**： 400B
> 2.  **协议开销 (除应用层和物理层外的5层)**： (表示层+会话层+传输层+网络层+数据链路层) = 5层 × 20B/层 = 100B
> 3.  **总传输数据量**： 有效数据 + 协议开销 = 400B + 100B = 500B
> 4.  **传输效率**： (有效数据量 ÷ 总传输数据量) × 100% = (400B ÷ 500B) × 100% = **80%**
> **关键点**：理解每层封装都会增加头部/尾部开销。物理层只传输比特流，通常不计入协议开销。

#### **2. 计算机网络协议、接口、服务的概念**

*   **协议 (Protocol)**：
    *   是网络中设备之间进行数据交换所必须遵守的**规则的集合**。协议定义了通信的格式、时序和语义，确保不同设备能够正确地理解和响应彼此的信息。
    *   **协议的三要素**：
        1.  **语法 (Syntax)**：数据与控制信息的结构或格式。例如，数据包的字段长度、数据类型、编码方式等。
        2.  **语义 (Semantics)**：需要发出何种控制信息，完成何种动作，以及做出何种响应。例如，某个字段的含义、错误报告机制、连接建立或释放的逻辑等。
        3.  **同步（时序, Timing）**：事件实现顺序的详细说明。例如，数据发送的先后顺序、响应时间限制、同步机制等。
> [!key] **协议要素识别：时序** #2020年-33
> **题目**：图描述的协议要素是（ ）。C. 仅 III (时序)
> **判断标准**：
> *   **语法**：关注数据结构和格式定义（如报文头部字段、数据框架）。
> *   **语义**：分析功能含义和操作逻辑（如状态转换、功能描述文字）。
> *   **时序**：观察时间轴和消息顺序（如箭头方向、时间标记、序列号），描述发送方和接收方按照时间顺序发送和接受信息。
> **总结**：题目强调"按照时间顺序发送和接受信息"，明确聚焦于时间维度上的交互序列，因此主要体现了**时序**要素。

*   **接口 (Interface)**：
    *   指同一节点内，相邻两层之间进行信息交换的边界。接口定义了下层向上层提供服务的原语（操作）和参数。
*   **服务 (Service)**：
    *   下层向上层提供的功能调用。服务是抽象的，只描述了功能，不涉及具体实现。

#### **3. ISO/OSI 参考模型和 TCP/IP 参考模型**

这两个模型都是为了标准化和简化网络通信过程而提出的分层结构。OSI 模型是一个理论性更强的七层模型，而 TCP/IP 模型则更注重实践，是互联网的基石。

##### (1) OSI 参考模型 (Open Systems Interconnection Reference Model)

*   由国际标准化组织（ISO）制定，是一个概念性的标准。
*   **七层结构 (从低到高)**：
    1.  **物理层 (Physical Layer, L1)**：定义物理介质、电信号特性、比特编码、数据传输速率。
        *   **功能**：在物理媒体上传输原始比特流。
        *   **PDU**：比特 (Bit)。
    2.  **数据链路层 (Data Link Layer, L2)**：帧的传输与差错检测、流量控制、MAC地址寻址、介质访问控制。
        *   **功能**：在物理链路上实现**结点到结点**的可靠数据传输，将比特组装成帧。
        *   **PDU**：帧 (Frame)。
        *   **流量控制**：实现**相邻节点间**流量控制。 #2022年-33
        *   **差错控制**：提供链路层的差错检测和纠正。
    3.  **网络层 (Network Layer, L3)**：**路由选择**、逻辑寻址 (IP地址)、**分组转发**、拥塞控制。
        *   **功能**：实现**主机到主机**的数据包传输和路由选择。
        *   **PDU**：数据报 (Datagram) 或分组 (Packet)。
    4.  **传输层 (Transport Layer, L4)**：**端到端可靠/不可靠传输**；提供**复用与分用**机制；流量控制、拥塞控制。
        *   **功能**：实现**进程到进程**（端到端）的通信，提供可靠或不可靠的数据传输服务。这是**自下而上第一个提供端到端服务的层次**。 #2009年-33
        *   **PDU**：报文段 (Segment) 或用户数据报 (Datagram)。
    5.  **会话层 (Session Layer, L5)**：管理进程间的通信会话（建立、维护、终止会话，同步）。 #2019年-33
        *   **功能**：提供应用进程之间**对话管理**和同步。
        *   **PDU**：通常为报文 (Message)。
    6.  **表示层 (Presentation Layer, L6)**：负责数据格式转换、编码、解码、压缩、解压缩、加密、解密。 #2013年-33
        *   **功能**：处理两个通信系统中交换信息的表示方式，确保应用层能理解数据。
        *   **PDU**：通常为报文 (Message)。
    7.  **应用层 (Application Layer, L7)**：提供网络服务接口，支持用户应用程序。
        *   **功能**：直接为用户提供各种网络应用服务。
        *   **PDU**：报文 (Message)。

> [!key] **OSI传输层：第一个端到端服务** #2009年-33
> **题目**：在 OSI 参考模型中，自下而上第一个提供端到端服务的层次是（ ）。B. 传输层
> **解释**：
> *   **端到端服务**：指在通信的源端和目的端（通常是应用进程）之间建立逻辑通信信道，为上层应用提供透明的数据传输服务，而不关心中间网络的具体拓扑结构和转发过程。
> *   **传输层 (L4)**：通过端口号机制实现主机内多个应用进程的复用和分用，提供进程到进程的通信服务，并可提供数据完整性检验、流量控制、拥塞控制等可靠传输机制。
> *   **数据链路层 (L2)**：提供**点到点**服务（相邻节点间）。
> *   **网络层 (L3)**：提供**主机到主机**服务（跨网络路径），但不区分主机内具体进程，且通常不可靠。

> [!tip] **OSI会话层：对话管理** #2019年-33
> **题目**：OSI 参考模型的第 5 层（自下而上） 完成的主要功能是（ ）。C. 会话管理
> **解释**：
> *   **会话层 (L5)**：位于传输层之上，表示层之下。其核心功能是**会话管理**，包括会话建立、维护、同步（如设置检查点）、对话控制（如全双工/半双工模式）、以及会话终止。

> [!danger] **OSI应用层相邻层功能：数据格式转换 (表示层)** #2013年-33
> **题目**：在 OSI 参考模型中，下列功能需由应用层的相邻层实现的是（ ）。B. 数据格式转换
> **解释**：
> *   **应用层 (L7)** 的直接相邻下层是**表示层 (L6)**。
> *   **表示层**的核心功能就是**数据格式转换**（如字符编码转换、数据结构转换、数值表示转换），以及数据压缩、加密等附加服务。

> [!info] **OSI会话层直接服务提供者：传输层** #2014年-33
> **题目**：在 OSI 参考模型中，直接为会话层提供服务的是（ ）。C. 传输层
> **解释**：
> *   根据OSI分层原理，**下层为上层提供服务**。
> *   **会话层 (L5)** 的直接下层是**传输层 (L4)**。因此，传输层直接为会话层提供端到端的连接管理、数据传输、完整性保证、流量控制等服务。

> [!key] **OSI数据链路层：相邻节点间流量控制** #2022年-33
> **题目**：在 ISO/OSI 参考模型中，实现两个相邻结点间流量控制功能的是（ ）。B. 数据链路层
> **解释**：
> *   **流量控制**是网络通信中防止发送方发送数据过快导致接收方缓冲区溢出的机制。
> *   **相邻节点间**流量控制特指直接物理连接的两个网络设备之间的控制，控制范围限定在单跳链路内，这是**数据链路层**的核心功能（例如通过停等协议、滑动窗口协议、HDLC等实现）。
> *   **传输层**则实现**端到端（进程到进程）**的流量控制。

##### (2) TCP/IP 参考模型 (Transmission Control Protocol/Internet Protocol)

*   是互联网事实上的标准，更加实用和简化。
*   **四层结构 (有时也说五层，把网络接口层细分为数据链路层和物理层)**：
    1.  **网络接口层 (Network Interface Layer, L1)**：
        *   **对应OSI**：物理层 + 数据链路层。
        *   **功能**：处理物理介质访问、帧的传输与差错检测、MAC地址寻址。不定义具体的协议，强调接口。
        *   **PDU**：帧 (Frame) 或比特 (Bit)。
    2.  **网际层 (Internet Layer, L2)**：
        *   **对应OSI**：网络层。
        *   **功能**：**IP寻址、路由选择、分组转发**。提供**无连接、不可靠**的**主机到主机**数据传输服务。 #2011年-33 #2012年-33 #2021年-33
        *   **PDU**：数据报 (Datagram) 或分组 (Packet)。
        *   **核心协议**：IP (Internet Protocol)、ICMP (Internet Control Message Protocol)、ARP (Address Resolution Protocol)、IGMP (Internet Group Management Protocol)。
    3.  **传输层 (Transport Layer, L3)**：
        *   **对应OSI**：传输层。
        *   **功能**：**端到端通信**。提供进程到进程的数据传输服务。
        *   **PDU**：报文段 (Segment) / 用户数据报 (Datagram)。
        *   **核心协议**：
            *   **TCP (Transmission Control Protocol)**：面向连接、可靠传输、流量控制、拥塞控制。
            *   **UDP (User Datagram Protocol)**：无连接、不可靠、尽力而为传输。
    4.  **应用层 (Application Layer, L4)**： #2018年-33
        *   **对应OSI**：应用层 + 表示层 + 会话层。
        *   **功能**：提供特定应用服务，处理数据格式、会话管理。
        *   **PDU**：报文 (Message)。
        *   **核心协议**：HTTP, FTP, SMTP, DNS, DHCP, Telnet, SNMP等。TLS/SSL在TCP/IP中通常认为是应用层的一部分或应用层与传输层之间的一个安全协议层，其部分功能（如加密解密）对应OSI的表示层。

> [!key] **TCP/IP网络层服务特性：无连接不可靠数据报** #2011年-33
> **题目**：TCP/IP 参考模型的网络层提供的是（ ）。A. 无连接不可靠的数据报服务
> **解释**：
> *   **IP协议**是TCP/IP网络层的核心，它提供的是**无连接 (Connectionless)**、**不可靠 (Unreliable)** 的**数据报 (Datagram)** 服务。
> *   **无连接**：每个IP数据包独立处理和转发，路由器不维护连接状态。
> *   **不可靠**：IP协议不保证数据包的可靠交付、顺序到达或重复检测，这些由上层（传输层，如TCP）负责。
> *   **数据报服务**：每个数据包根据目的地址独立选择转发路径。

> [!info] **TCP/IP网络层：直接为ICMP提供服务的协议是IP** #2012年-33
> **题目**：在 TCP/IP 体系结构中，直接为 ICMP 提供服务的协议是（ ）。B. IP
> **解释**：
> *   **ICMP (Internet Control Message Protocol)** 是TCP/IP协议族中的网络层辅助协议，负责网络控制消息的传递和故障诊断。
> *   ICMP消息**直接封装在IP数据包中**，IP协议负责ICMP消息的路由选择、转发和传递到目标主机。因此，IP直接为ICMP提供服务。

> [!danger] **TCP/IP传输层相邻下层功能：路由选择 (网际层)** #2021年-33
> **题目**：在 TCP/IP 参考模型中，由传输层相邻的下一层实现的主要功能是（ ）。B. 路由选择
> **解释**：
> *   **传输层 (L3)** 在TCP/IP模型中，其相邻的下一层是**网际层 (L2)**。
> *   **网际层 (Internet Layer)** 的核心功能就是实现数据包在网络中的**路由选择**和转发。IP协议是其典型代表。

> [!key] **TCP/IP应用层协议与传输层服务选择：DNS使用UDP** #2018年-33
> **题目**：下列 TCP/IP 应用层协议中，可以使用传输层无连接服务的是（ ）。B. DNS
> **解释**：
> *   **传输层无连接服务**由**UDP协议**提供，适用于对实时性要求高、能容忍少量丢失、数据量小、查询响应模式的应用。
> *   **DNS (Domain Name System)** 采用请求-响应模式，需要快速响应，单个查询/响应报文通常较小，因此主要基于**UDP**。
> *   **FTP, SMTP, HTTP** 都是基于**TCP**，因为它们对数据完整性有高要求（文件传输、邮件内容、网页内容）。

##### (3) OSI 与 TCP/IP 模型对比总结表

| **OSI 参考模型** | **主要功能**                                 | **TCP/IP 模型** | **主要功能**                                              | **数据单元**                               |
| :----------- | :--------------------------------------- | :-----------: | :---------------------------------------------------- | :------------------------------------- |
| **7. 应用层**   | 提供网络服务接口，支持用户应用程序。                       |               |                                                       | **报文 (Message)**                       |
| **6. 表示层**   | 负责数据格式转换、编码、解码、压缩、解压缩、加密、解密。             |  **4. 应用层**   | **（合并了 OSI 的应用、表示、会话三层功能）**<br> 提供特定应用服务，处理数据格式、会话管理。 | **报文 (Message)**                       |
| **5. 会话层**   | 管理进程间的通信会话（建立、维护、终止会话，同步）。               |               |                                                       |                                        |
| **4. 传输层**   | **端到端可靠/不可靠传输**；提供**复用与分用**机制；流量控制、拥塞控制。 |  **3. 传输层**   | **端到端通信（TCP 提供可靠性，UDP 提供非可靠性）**<br> 处理数据分段与重组、端口寻址。   | **报文段 (Segment)** / **数据报 (Datagram)** |
| **3. 网络层**   | **路由选择**、逻辑寻址 (IP 地址)、**分组转发**、拥塞控制。     |  **2. 网际层**   | **IP 寻址、路由选择、分组转发**<br> 负责主机到主机的数据传输。                 | **数据报 (Datagram)**                     |
| **2. 数据链路层** | 帧的传输与差错检测、流量控制、**MAC 地址寻址**、介质访问控制。      | **1. 网络接口层**  | **（合并了 OSI 的数据链路层和物理层功能）**<br> 处理物理介质访问、帧的传输。         | **帧 (Frame)**                          |
| **1. 物理层**   | 定义物理介质、电信号特性、比特编码、数据传输速率。                |               |                                                       | **比特 (Bit)**                           |

**OSI 与 TCP/IP 关键区别：**

| **概念**     | **OSI 参考模型**                         | **TCP/IP 模型**                                        |
| :--------- | :----------------------------------- | :--------------------------------------------------- |
| **分层数量**   | **7 层**                              | **4 层** (有时也说 5 层，把网络接口层细分为数据链路层和物理层)                |
| **表示/会话层** | **单独分层**：详细定义了数据表示和会话管理的功能。          | **合并到应用层**：认为这些功能通常与特定应用紧密结合，由应用层协议自身处理。             |
| **网络接口层**  | 明确区分数据链路层和物理层，对具体协议的定义**较少**。        | **合并数据链路层和物理层**：不定义具体的物理和链路层协议，**更强调接口**。            |
| **可靠性责任**  | 理论上**网络层**可以提供可靠性服务（尽管实际的 IP 是不可靠的）。 | **可靠性主要由传输层（TCP）负责**。网际层（IP）是**尽力而为（Best-Effort）**的。 |
| **理论与实践**  | 理论模型更完善、严谨，但实现复杂。                    | 更实用、更简洁，是互联网的实际标准。                                   |
| **连接与非连接** | 网络层和传输层都可以支持**有连接和无连接**通信。           | 网络层（IP）是**无连接**的，传输层（TCP是有连接的，UDP是无连接的）。             |
| **出现时间**   | 先于 TCP/IP 模型发布，但其商业实现未普及。            | 晚于 OSI，但因其在互联网上的成功而普及。                               |

#### **4. 常见网络设备层级** #网络设备层级 #网络设备

不同的网络设备在 OSI/TCP-IP 模型的不同层级上工作，执行该层的功能，从而实现数据在网络中的传输和处理。

| **设备**           | **工作层级 (OSI 模型)**     | **主要功能**                                                                       | **关键依据/特性**                                   | **小比喻**                                     |
| :----------------- | :-------------------------- | :--------------------------------------------------------------------------------- | :-------------------------------------------------- | :--------------------------------------------- |
| **集线器 (HUB)**   | **物理层 (L1)**             | 1. **信号放大和广播**：接收到信号后，简单地将其放大并转发到所有其他连接端口。 <br> 2. 不进行任何智能判断，所有端口共享带宽。 | **比特流 (Bit)**；不识别 MAC 或 IP 地址。          | "一根共享的延长线"，信号来了，无脑分发给所有人。 |
| **中继器 (Repeater)** | **物理层 (L1)**             | 信号放大与整形，延长网络传输距离。                                                 | **比特流 (Bit)**；不识别 MAC 或 IP 地址。          | "一个信号放大器"，让声音传得更远。             |
| **网桥 (Bridge)**  | **数据链路层 (L2)**         | 1. **隔离冲突域**：连接两个局域网，根据 MAC 地址过滤和转发帧。 <br> 2. 建立 MAC 地址表。 | **帧 (Frame)**；识别 **MAC 地址**；转发决策基于 MAC 地址。 | "一个智能门卫"，能识别来访者的姓名（MAC），决定是否开门。 |
| **交换机 (Switch)** | **数据链路层 (L2)** (通常二层) | 1. **隔离冲突域，划分广播域** (通过 VLAN)。 <br> 2. **基于 MAC 地址** 精准转发数据帧。 <br> 3. 自学习 MAC 地址表，全双工通信。 | **帧 (Frame)**；识别 **MAC 地址**；转发决策基于 MAC 地址。 | "一个智能分拣中心"，能根据包裹上的收件人姓名（MAC）精准投递。 |
| **路由器 (Router)** | **网络层 (L3)**             | 1. **连接不同网络/广播域**。 <br> 2. **基于 IP 地址** 进行路由选择和数据包转发。 <br> 3. 隔离广播域，连接不同子网。 | **数据报 (Datagram)**；识别 **IP 地址**；转发决策基于路由表。 | "一个指路人"，根据目的地地址（IP）告诉你走哪条路。 |
| **网关 (Gateway)** | **多层 (通常在应用层)**    | 1. **协议转换**：在不同协议族之间进行数据格式和协议的转换。 <br> 2. 通常是应用层网关。 | **报文 (Message)**；涉及多层协议栈的转换。        | "一个翻译官"，将不同语言（协议）的信息相互转换。 |

> [!key] **网络设备工作层级** #2016年-33
> **题目**：在 OSI 参考模型中， R1、 Switch、 Hub 实现的最高功能层分别是（ ）。C. 3、 2、 1
> **解释**：
> *   **R1 (路由器)**：工作在**网络层 (L3)**，基于IP地址进行路由选择和包转发。
> *   **Switch (交换机)**：工作在**数据链路层 (L2)**，基于MAC地址进行帧交换。
> *   **Hub (集线器)**：工作在**物理层 (L1)**，仅进行信号放大和广播。
> **记忆口诀**：**"物理 Hub，链路 Switch，网络 Router"**。

#### **5. 数据解封装过程：从比特流到应用数据**

数据在网络中从物理层向上层传输时，会经历逐层解封装的过程，每层移除自身的协议头部（和尾部），并将上层数据传递给上一层。

| **层级 (TCP/IP 模型)** | **接收到的数据单元 (PDU)**            | **核心解封装操作**                                                                                                                            | **移除的封装信息 (协议头/尾)**                    | **向上层传递的数据单元**                | **小比喻**                |
| :----------------- | :---------------------------- | :------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------- | :---------------------------- | :--------------------- |
| **物理层**            | **原始物理信号** (电、光、无线)           | 1. 将物理信号**转换**为比特流。 <br> 2. 进行**时钟同步**，识别出每个比特。                                                                                        | 无 (仅信号转换)                              | **比特流**                       | 快递包裹被运到家门口。            |
| **数据链路层**          | **比特流**                       | 1. 根据帧定界符，**识别**比特流中的**数据帧**。 <br> 2. 进行**错误检测** (检查 FCS/CRC)。若有错则丢弃。 <br> 3. **MAC 地址过滤**：检查目的 MAC 地址是否为本机、广播或组播。若不匹配则丢弃。             | **帧头** (如 MAC 地址, 类型) 和 **帧尾** (如 FCS) | **网络层数据包** (如 IP 数据报)         | 撕掉最外层快递单，核对收件人 MAC 地址。 |
| **网络层**            | **网络层数据包** (如 IP 数据报)         | 1. **IP 地址过滤**：检查目的 IP 地址是否为本机 IP。若为路由器则根据路由表决定转发。 <br> 2. **处理分片与重组**：如果数据包被分片，则收集并重组为完整数据包。 <br> 3. IP 头部**校验和验证**。                  | **IP 头部**                              | **传输层数据段** (如 TCP 段, UDP 数据报) | 打开包装盒，核对收件人 IP 地址。     |
| **传输层**            | **传输层数据段** (如 TCP 段, UDP 数据报) | 1. **端口号复用/解复用**：根据目的端口号将数据交付给本机上**特定应用程序进程**。 <br> 2. **TCP 特有**：序号检查、乱序重组、确认处理、流量控制、拥塞控制、校验和验证。 <br> 3. **UDP 特有**：基本校验和验证 (不保证可靠性)。 | **TCP 头部** 或 **UDP 头部**                | **应用层数据**                     | 打开小包裹或商品包装，核对收件人端口号。   |
| **应用层**            | **应用层数据**                     | 1. **协议解析**：根据具体的应用层协议 (如 HTTP, FTP 等)，解析协议头。 <br>2. **数据处理**：将最终的、可被应用程序理解的**原始数据**提交给应用程序。                                           | 应用层协议头 (若有)                            | **原始用户数据**                    | 取出商品，并开始使用。            |

---
